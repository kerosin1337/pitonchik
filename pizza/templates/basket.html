{% extends 'base.html' %}
{% load static %}
{% block content %}


    <main class="container-xxl shadow-lg bg-white rounded mt-3 mb-3">
        <h2 class="mt-4 pl-3 pr-3">Корзина</h2>
        {% verbatim %}
        <div id="basket">
            <h3 class="mt-4 pl-3 pr-3" v-if="Object.keys(cart.products).length === 0">Добавьте что-нибудь из меню</h3>
            <div class="border-top border-bottom" v-for="item in cart.products">
                <div class="row g-0 p-3">
                    <div class="col-md-2 align-self-center">
                        <img :src="item.product.image" width="80%" class="m-auto">
                    </div>
                    <div class="card-body col-md-6 pr-0 pl-0">
                        <div class=" p-0 d-inline-block" style="">
                            <h3 class="card-title">{{ item.product.name }}</h3>
                            <p class="card-text">{{ item.product.description }}</p>
                            <p class="card-text">
                                <small class="text-muted">Размер: {{ item.size }}</small>
                            </p>
                        </div>
                    </div>
                    <div class="align-self-center col-md-4">
                        <div class="d-flex justify-content-between">
                            <div class="input-group w-auto">
                                <span class="input-group-btn">
                                    <button class="btn btn-outline-info btn-sm rounded-0" type="button"
                                            @click="changeQTY(item.product.slug, item.size, item.qty, -1)"
                                            :disabled="item.qty === 1">-</button>
                                </span>
                                <div class="align-self-center border border-info ml-2 mr-2">
                                    <span class="input-group-btn pl-2 pr-2">
                                    {{ item.qty }}
                                    </span>
                                </div>
                                <!--                                                                            :disabled="item.qty === 1"

                                                                                                            :disabled="item.qty === 10"-->

                                <span class="input-group-btn">
                                    <button class="btn btn-outline-info btn-sm rounded-0" type="button"
                                            @click="changeQTY(item.product.slug, item.size, item.qty, 1)">+</button>
                                </span>
                            </div>
                            <div>
                                <span>
                                    {{ item.final_price }}
                                </span>
                            </div>
                            <div>
                                <span>
                                    <button type="button" class="btn-close" aria-label="Close"
                                            @click="deleteProduct(item.product.slug, item.size, item.final_price)"></button>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <form action="" method="post">
                <input type="hidden" :value="csrf" name="csrfmiddlewaretoken">
                <input type="text" name="code">
                <input type="submit">
            </form>
            <div class="d-flex mt-5 mb-5">
                <div>
                    <a href="/basket/order" class="btn btn-outline-info" v-if="Object.keys(cart.products).length">Оформить заказ</a>
                    <a href="/" class="btn btn-outline-info" v-else>Вернуться на главную</a>
                    <a href="/delete-cart/" class="ml-5 text-info font-weight-700" style="text-decoration: underline" v-if="Object.keys(cart.products).length">
                        Удалить корзину
                    </a>
                </div>
                <div class="ms-auto">
                    <span class="font-weight-900 text-warning">Итого: {{ cart.final_price }}</span>
                </div>
            </div>
        </div>
        {% endverbatim %}

        
    </main>


{% endblock %}